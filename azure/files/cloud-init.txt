#cloud-config
package_update: true
package_upgrade: true

packages:
  - git
  - cifs-utils

runcmd:
  - echo "Starting bootstrap tasks..."
  - mkdir -p /mnt/azurefileshare
  - echo "//${storage_account_name}.file.core.windows.net/${file_share_name} /mnt/azurefileshare cifs vers=3.0,username=${storage_account_name},password=${storage_account_key},dir_mode=0777,file_mode=0777,serverino" >> /etc/fstab
  - mount -a
  - echo "Mounting Complete"
  - curl -sL https://deb.nodesource.com/setup_22.19.0 | sudo -E bash -
  - sudo apt install -y nodejs
  - git clone https://github.com/dhruv0503/bigChatApp.git /home/adminuser/app
  - cd /home/adminuser/app
  - npm install
  - npm start
  - echo "Bootstrap complete!"